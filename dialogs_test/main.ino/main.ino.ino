#include <Arduboy2.h>
#include "Tinyfont.h"

/*
 * Normal font
 *  -> Max cols: 21
 *  -> Max lines: 8
 * 
 * Tiny font
 *  -> Max cols: 25
 *  -> Max lines: 13
 */

Arduboy2 arduboy;
Tinyfont tinyfont = Tinyfont(arduboy.sBuffer, Arduboy2::width(), Arduboy2::height());

int currentDialog = 0;
int countDialogs = 7;
int generalCounter = 0;

/*
const char dialog000[] PROGMEM = "0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n";
const char dialog001[] PROGMEM = "1123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n";
const char dialog002[] PROGMEM = "2123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n";  
const char dialog003[] PROGMEM = "3123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n";                
const char dialog004[] PROGMEM = "4123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n";
const char dialog005[] PROGMEM = "5123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n";
const char dialog006[] PROGMEM = "6123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n0123456789ABCDEFGHIJKLMNO\n";
*/
const char dialog000[] PROGMEM = "0123456789";
const char dialog001[] PROGMEM = "1123456789";
const char dialog002[] PROGMEM = "2123456789";
const char dialog003[] PROGMEM = "3123456789";
const char dialog004[] PROGMEM = "4123456789";
const char dialog005[] PROGMEM = "5123456789";
const char dialog006[] PROGMEM = "6123456789";
const char * const dialogs[] PROGMEM =
{
  dialog000,
  dialog001,
  dialog002,
  dialog003,
  dialog004,
  dialog005,
  dialog006
};
#define DIALOGS 7

// char tBuffer[338];
char tBuffer[10];

void setup() {
  arduboy.begin();
  arduboy.setFrameRate(30);
  arduboy.clear();
}

void loop() {
  if ( !arduboy.nextFrame() ) {
    return;
  }

  arduboy.clear();
  arduboy.pollButtons();

  /*
  if ( arduboy.justPressed(A_BUTTON) ) {
    currentDialog = 0;
    arduboy.setCursor(0, 0);
    arduboy.print("A");
  } else if ( arduboy.justPressed(B_BUTTON) ) {
    currentDialog = countDialogs - 1;
    arduboy.setCursor(0, 0);
    arduboy.print("B");
  } else if ( arduboy.justPressed(UP_BUTTON) ) {
    currentDialog -= 1;
    if ( currentDialog < 0 ) {
      currentDialog = 0;
    }
    arduboy.setCursor(0, 0);
    arduboy.print("UP");
  } else if ( arduboy.justPressed(DOWN_BUTTON) ) {
    currentDialog += 1;
    if ( currentDialog > ( countDialogs - 1 ) ) {
      currentDialog = countDialogs - 1;
    }
    arduboy.setCursor(0, 0);
    arduboy.print("DOWN");
  }
  */
  currentDialog += 1;
  if ( currentDialog > ( countDialogs - 1 ) ) {
    currentDialog = 0;
  }
  tinyfont.setCursor(0, 0);
  // tinyfont.print(strcpy_P(tBuffer, (char*)pgm_read_word(&(dialogs[currentDialog]))));
  tinyfont.print(strcpy_P(tBuffer, (char*)pgm_read_word(&(dialogs[5]))));
  arduboy.setCursor(currentDialog, 20);
  generalCounter += 1;
  arduboy.print(generalCounter);
  arduboy.setCursor(20, 30);
  arduboy.print(currentDialog);
  
  arduboy.display();
}
